---
import { getCollection, render } from "astro:content";
import Layout from "@layouts/Layout.astro";

export async function getStaticPaths() {
  const posts = await getCollection("posts");

  return posts.map((post) => ({
    params: { slug: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<Layout title={post.data.title}>
  <div class="flex justify-between items-center mb-8">
    <div class="flex gap-4 font-bold">
      <a href="/">Home</a>
      <a href="/p">Posts</a>
    </div>
  </div>

  <h1 class="mb-0!">{post.data.title}</h1>
  <h2 class="mb-8 italic text-neutral-500">
    {new Date(post.data.created).toLocaleDateString("se")}
  </h2>

  <div
    class="prose-headings:text-white prose-headings:font-bold prose-headings:mt-6 prose-headings:mb-2 prose-h2:text-lg prose-pre:mb-4 prose-pre:p-2 prose-a:text-orange-500 prose-blockquote:bg-zinc-700 prose-blockquote:px-2 prose-blockquote:border-l-2"
  >
    <Content />
  </div>

  <footer class="my-24">
    <a href="/p" class="font-bold"> &larr; Back to posts </a>
  </footer>
</Layout>
